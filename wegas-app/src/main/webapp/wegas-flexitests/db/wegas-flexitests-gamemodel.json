{
    "@class": "GameModel",
    "name": "FlexiTests(1)",
    "createdTime": null,
    "childVariableDescriptors": [{
            "@class": "NumberDescriptor",
            "name": "currentPage",
            "editorLabel": "Page",
            "label": "Page",
            "defaultInstance": {
                "@class": "NumberInstance",
                "history": [
                    2.0, 
                    2.0, 
                    2.0, 
                    2.0
                ],
                "value": 2.0
            },
            "scope": {
                "@class": "PlayerScope",
                "broadcastScope": "TeamScope"
            },
            "minValue": 2,
            "maxValue": null
        }, 
        {
            "@class": "ObjectDescriptor",
            "name": "results",
            "editorLabel": "Test1",
            "label": "Test1",
            "defaultInstance": {
                "@class": "ObjectInstance",
                "properties": {
                }
            },
            "scope": {
                "@class": "PlayerScope",
                "broadcastScope": "TeamScope"
            },
            "description": "",
            "properties": {
                "4": "OPTION4",
                "3": "OPTION3",
                "2": "OPTION2",
                "1": "OPTION1"
            }
        }, 
        {
            "@class": "TriggerDescriptor",
            "name": "end",
            "editorLabel": "End",
            "label": "End",
            "defaultInstance": {
                "@class": "TriggerInstance",
                "currentStateId": 1,
                "enabled": true,
                "transitionHistory": [
                ]
            },
            "scope": {
                "@class": "PlayerScope",
                "broadcastScope": "TeamScope"
            },
            "oneShot": true,
            "triggerEvent": {
                "@class": "Script",
                "content": "VariableDescriptorFacade.find(8196).size(self)>4",
                "language": "JavaScript"
            },
            "postTriggerEvent": {
                "@class": "Script",
                "content": "VariableDescriptorFacade.find(8181).setValue(self, 4);",
                "language": "JavaScript"
            }
        }, 
        {
            "@class": "ObjectDescriptor",
            "name": "demographics",
            "editorLabel": "demographics",
            "label": "demographics",
            "defaultInstance": {
                "@class": "ObjectInstance",
                "properties": {
                }
            },
            "scope": {
                "@class": "PlayerScope",
                "broadcastScope": "TeamScope"
            },
            "description": "",
            "properties": {
                "1": ""
            }
        }
    ],
    "scriptLibrary": {
        "default": {
            "@class": "GameModelContent",
            "contentType": null,
            "content": "importPackage(org.apache.shiro);\nfunction store(object, key, value){\n    eval(object).properties.put(key, value);    \n}\nfunction getInstances(descriptors){\n    var a=[];\n    if(SecurityUtils.getSubject().hasRole(\"Registered\")){\n        for(var i in descriptors){\n            a.push(eval(descriptors[i]).getScope().getVariableInstances());\n        }\n    }else{\n        for(var i in descriptors){\n            a.push(eval(descriptors[i]).getScope().getPrivateInstances());\n        }\n    }\n    \n    return a;\n}"
        }
    },
    "cssLibrary": {
    },
    "clientScriptLibrary": {
        "load": {
            "@class": "GameModelContent",
            "contentType": null,
            "content": "Y.use([\"wegas-flexitests-controller\", \"wegas-text\", \"wegas-image\", \"wegas-choicelist\"], function (Z) {\r\n    Y.Wegas.FlexitestsController.EDITMENU = [{\r\n            type : \"Button\",\r\n            label : \"Properties\",\r\n            cssClass : \"editor-exploreGameModel-button\",\r\n            plugins : [{\r\n                    fn : \"EditWidgetAction\"\r\n                }\r\n            ]\r\n        }, {\r\n            type : \"Button\",\r\n            label : \"Add\",\r\n            cssClass : \"editor-exploreGameModel-button\",\r\n            plugins : [{\r\n                    \"fn\" : \"WidgetMenu\",\r\n                    \"cfg\" : {\r\n                        \"menuCfg\" : {\r\n                            points : [\"tl\", \"tr\"]\r\n                        },\r\n                        \"event\" : \"mouseenter\",\r\n                        \"children\" : [{\r\n                                type : \"Button\",\r\n                                label : \"Single choice list\",\r\n                                plugins : [{\r\n                                        fn : \"AddChildWidgetAction\",\r\n                                        cfg : {\r\n                                            \"childType\" : \"ChoiceList\"\r\n                                        }\r\n                                    }\r\n                                ]\r\n                            }, {\r\n                                type : \"Button\",\r\n                                label : \"Image (fix point)\",\r\n                                plugins : [{\r\n                                        fn : \"AddChildWidgetAction\",\r\n                                        cfg : {\r\n                                            \"childType\" : \"Image\"\r\n                                        }\r\n                                    }\r\n                                ]\r\n                            }\r\n                        ]\r\n                    }\r\n                }\r\n            ]\r\n        }\r\n    ];\r\n    Y.Wegas.ChoiceList.EDITMENU = [{\r\n            type : \"Button\",\r\n            label : \"Properties\",\r\n            cssClass : \"editor-exploreGameModel-button\",\r\n            plugins : [{\r\n                    fn : \"EditWidgetAction\"\r\n                }\r\n            ]\r\n        }, {\r\n            type : \"Button\",\r\n            label : \"Add\",\r\n            cssClass : \"editor-exploreGameModel-button\",\r\n            plugins : [{\r\n                    \"fn\" : \"WidgetMenu\",\r\n                    \"cfg\" : {\r\n                        \"menuCfg\" : {\r\n                            points : [\"tl\", \"tr\"]\r\n                        },\r\n                        \"event\" : \"mouseenter\",\r\n                        \"children\" : [{\r\n                                type : \"Button\",\r\n                                label : \"Text\",\r\n                                plugins : [{\r\n                                        fn : \"AddChildWidgetAction\",\r\n                                        cfg : {\r\n                                            \"childType\" : \"Text\"\r\n                                        }\r\n                                    }\r\n                                ]\r\n                            }, {\r\n                                type : \"Button\",\r\n                                label : \"Image\",\r\n                                plugins : [{\r\n                                        fn : \"AddChildWidgetAction\",\r\n                                        cfg : {\r\n                                            \"childType\" : \"Image\"\r\n                                        }\r\n                                    }\r\n                                ]\r\n                            }\r\n                        ]\r\n                    }\r\n                }\r\n            ]\r\n        }, {\r\n            type : \"Button\",\r\n            label : \"Delete\",\r\n            cssClass : \"editor-exploreGameModel-button\",\r\n            plugins : [{\r\n                    fn : \"DeleteWidgetAction\"\r\n                }\r\n            ]\r\n        }\r\n    ];\r\n    Y.Wegas.List.EDITMENU = [{\r\n            type : \"Button\",\r\n            label : \"Properties\",\r\n            cssClass : \"editor-exploreGameModel-button\",\r\n            plugins : [{\r\n                    fn : \"EditWidgetAction\"\r\n                }\r\n            ]\r\n        }, {\r\n            type : \"Button\",\r\n            label : \"Add\",\r\n            cssClass : \"editor-exploreGameModel-button\",\r\n            plugins : [{\r\n                    \"fn\" : \"WidgetMenu\",\r\n                    \"cfg\" : {\r\n                        \"menuCfg\" : {\r\n                            points : [\"tl\", \"tr\"]\r\n                        },\r\n                        \"event\" : \"mouseenter\",\r\n                        \"children\" : [{\r\n                                type : \"Button\",\r\n                                label : \"Text\",\r\n                                plugins : [{\r\n                                        fn : \"AddChildWidgetAction\",\r\n                                        cfg : {\r\n                                            \"childType\" : \"Text\"\r\n                                        }\r\n                                    }\r\n                                ]\r\n                            }, {\r\n                                type : \"Button\",\r\n                                label : \"Form\",\r\n                                plugins : [{\r\n                                        fn : \"AddChildWidgetAction\",\r\n                                        cfg : {\r\n                                            \"childType\" : \"Form\"\r\n                                        }\r\n                                    }\r\n                                ]\r\n                            }, {\r\n                                type : \"Button\",\r\n                                label : \"Results\",\r\n                                plugins : [{\r\n                                        fn : \"AddChildWidgetAction\",\r\n                                        cfg : {\r\n                                            \"childType\" : \"FlexitestsResults\"\r\n                                        }\r\n                                    }\r\n                                ]\r\n                            }\r\n\r\n                        ]\r\n                    }\r\n                }\r\n            ]\r\n        }, {\r\n            type : \"Button\",\r\n            label : \"Delete\",\r\n            cssClass : \"editor-exploreGameModel-button\",\r\n            plugins : [{\r\n                    fn : \"DeleteWidgetAction\"\r\n                }\r\n            ]\r\n        }\r\n    ];\r\n    Y.Wegas.Text.ATTRS.plugins = Y.clone(Y.Wegas.Text.ATTRS.plugins);\r\n    Y.Wegas.Text.ATTRS.plugins._inputex.items.push({\r\n        type : \"Button\",\r\n        label : \"Expected response\",\r\n        data : \"FlexiResponse\"\r\n    });\r\n    Y.Wegas.Image.ATTRS.plugins = Y.Wegas.Text.ATTRS.plugins;\r\n});\r\n"
        }
    },
    "properties": {
        "cssUri": "wegas-flexitests/css/wegas-flexitests.css"
    },
    "pages": {
        "3": {
            "type": "FlexitestsController",
            "cssClass": "test-page",
            "plugins": [
                {
                    "fn": "SwapZone",
                    "cfg": {
                        "after": 1
                    }
                }
            ],
            "fixPoint": 1000,
            "random": true,
            "popupAfter": 3,
            "popupContent": "<p>A popup shown after 3 questions</p>",
            "children": [
                {
                    "id": "leftElement",
                    "type": "ChoiceList",
                    "plugins": [
                        {
                            "fn": "HideAfter",
                            "cfg": {
                                "time": "0,1000"
                            }
                        }, 
                        {
                            "fn": "ShowAfter",
                            "cfg": {
                                "time": "500"
                            }
                        }, 
                        {
                            "fn": "CSSPosition",
                            "cfg": {
                                "styles": {
                                    "position": "absolute",
                                    "zIndex": "10",
                                    "top": "50pt",
                                    "left": "50pt",
                                    "bottom": "",
                                    "right": ""
                                }
                            }
                        }
                    ],
                    "children": [
                        {
                            "type": "Text",
                            "content": "Male"
                        }
                    ]
                }, 
                {
                    "id": "rightElement",
                    "type": "ChoiceList",
                    "plugins": [
                        {
                            "fn": "HideAfter",
                            "cfg": {
                                "time": "0,1500"
                            }
                        }, 
                        {
                            "fn": "ShowAfter",
                            "cfg": {
                                "time": "1000"
                            }
                        }, 
                        {
                            "fn": "CSSPosition",
                            "cfg": {
                                "styles": {
                                    "position": "absolute",
                                    "zIndex": "10",
                                    "top": "50pt",
                                    "left": "",
                                    "bottom": "",
                                    "right": "50pt"
                                }
                            }
                        }
                    ],
                    "children": [
                        {
                            "type": "Text",
                            "content": "Female"
                        }
                    ]
                }, 
                {
                    "id": "centerElement",
                    "type": "ChoiceList",
                    "plugins": [
                        {
                            "fn": "HideAfter",
                            "cfg": {
                                "time": "0"
                            }
                        }, 
                        {
                            "fn": "ShowAfter",
                            "cfg": {
                                "time": "1500"
                            }
                        }, 
                        {
                            "fn": "CSSPosition",
                            "cfg": {
                                "styles": {
                                    "position": "absolute",
                                    "zIndex": "10",
                                    "top": "300px",
                                    "left": "300px",
                                    "bottom": "",
                                    "right": "300px"
                                }
                            }
                        }
                    ],
                    "children": [
                        {
                            "type": "Image",
                            "plugins": [
                                {
                                    "fn": "FlexiResponse",
                                    "cfg": {
                                        "value": "1"
                                    }
                                }
                            ],
                            "url": "/hectorPerplexe.png"
                        }, 
                        {
                            "type": "Image",
                            "plugins": [
                                {
                                    "fn": "FlexiResponse",
                                    "cfg": {
                                        "value": "2"
                                    }
                                }
                            ],
                            "url": "/jessicaPerplexe.png"
                        }, 
                        {
                            "type": "Image",
                            "plugins": [
                                {
                                    "fn": "FlexiResponse",
                                    "cfg": {
                                        "value": "1"
                                    }
                                }
                            ],
                            "url": "/lucienPortrait.png"
                        }, 
                        {
                            "type": "Image",
                            "plugins": [
                                {
                                    "fn": "FlexiResponse",
                                    "cfg": {
                                        "value": "2"
                                    }
                                }
                            ],
                            "url": "/danielaConfiant.png"
                        }, 
                        {
                            "type": "Image",
                            "plugins": [
                                {
                                    "fn": "FlexiResponse",
                                    "cfg": {
                                        "value": "1"
                                    }
                                }
                            ],
                            "url": "/fernandPensif.png"
                        }
                    ]
                }, 
                {
                    "id": "flexi-mcq",
                    "type": "FlexitestsMCQ",
                    "plugins": [
                        {
                            "fn": "CSSPosition",
                            "cfg": {
                                "styles": {
                                    "position": "absolute",
                                    "zIndex": "10",
                                    "top": "",
                                    "left": "200px",
                                    "bottom": "30px",
                                    "right": "200px"
                                }
                            }
                        }
                    ],
                    "feedback": 1000,
                    "responseType": "radio",
                    "variable": {
                        "name": "results"
                    }
                }, 
                {
                    "type": "Image",
                    "cssClass": "fix-point",
                    "plugins": [
                        {
                            "fn": "CSSPosition",
                            "cfg": {
                                "styles": {
                                    "position": "absolute",
                                    "zIndex": "10",
                                    "top": "250pt",
                                    "left": "350pt",
                                    "bottom": "",
                                    "right": ""
                                }
                            }
                        }
                    ],
                    "url": "/fix-point/fix_red.png"
                }
            ]
        },
        "2": {
            "type": "List",
            "direction": "vertical",
            "children": [
                {
                    "type": "Text",
                    "cssClass": "flexitests-title",
                    "content": "<p>FlexiTests</p>"
                }, 
                {
                    "type": "Text",
                    "content": "_INSTRUCTIONS_"
                }, 
                {
                    "id": 2,
                    "type": "Form",
                    "plugins": [
                        {
                            "fn": "SaveObjectAction",
                            "cfg": {
                                "targetEvent": "submit",
                                "variable": {
                                    "name": "demographics"
                                }
                            }
                        }, 
                        {
                            "fn": "ExecuteScriptAction",
                            "cfg": {
                                "targetEvent": "submit",
                                "onClick": {
                                    "@class": "Script",
                                    "language": "JavaScript",
                                    "content": "currentPage.value = 3;"
                                }
                            }
                        }
                    ],
                    "cfg": {
                        "fields": [
                            {
                                "name": "fullname",
                                "label": "Name",
                                "type": "string",
                                "value": ""
                            }, 
                            {
                                "name": "gender",
                                "label": "Gender",
                                "choices": [
                                    {
                                        "value": "m",
                                        "label": "M"
                                    }, 
                                    {
                                        "value": "f",
                                        "label": "F"
                                    }
                                ],
                                "type": "select",
                                "value": "m"
                            }, 
                            {
                                "name": "date",
                                "type": "now",
                                "value": null
                            }
                        ]
                    }
                }
            ]
        },
        "1": {
            "type": "PageLoader",
            "cssClass": "flexitests",
            "pageLoaderId": "mainarea",
            "variable": {
                "name": "currentPage"
            }
        },
        "5": {
            "type": "List",
            "direction": "vertical",
            "children": [
                {
                    "type": "FlexitestsResults",
                    "variable": {
                        "name": "results"
                    },
                    "demographics": {
                        "name": "demographics"
                    },
                    "simpleMode": false,
                    "testPage": "3"
                }
            ]
        },
        "4": {
            "type": "List",
            "direction": "vertical",
            "children": [
                {
                    "type": "FlexitestsResults",
                    "variable": {
                        "name": "results"
                    },
                    "demographics": {
                        "name": "demographics"
                    },
                    "simpleMode": true,
                    "testPage": "3"
                }, 
                {
                    "type": "Text",
                    "content": "<p>Score table</p>\n<p>80-100 % Excellent</p>\n<p>60-80 % Good</p>\n<p>40-60 % Satisfying</p>\n<p>0-40 % Bad</p>"
                }
            ]
        }
    },
    "canInstantiate": true,
    "canDuplicate": true,
    "canEdit": true
}